<!DOCTYPE html>
<html>
  <head>
    <title>Shopping List</title>
    <style>
      /* Style for the form */
      form {
        display: flex;
        flex-direction: column;
        width: 300px;
        margin-bottom: 20px;
      }

      /* Style for the input field */
      input[type="text"] {
        padding: 10px;
        margin-bottom: 10px;
        border: none;
        border-radius: 5px;
      }

      /* Style for the add button */
      button.add {
        padding: 10px;
        background-color: green;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      /* Style for delete list button */
      button.delete {
        padding: 10px;
        background-color: red;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        width: 300px;
        margin-top: 20px;
      }

      /* Style for the remove button */
      button.remove {
        padding: 10px;
        margin-left: 10px;
        background-color: red;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>Shopping List</h1>
    <!-- Form to add items to the list -->
    <form id="addForm">
      <label for="item">Add an item:</label>
      <input type="text" id="item" placeholder="Enter item name" required>
      <button class="add">Add</button>
    </form>
    <!-- List of items -->
    <ul id="list"></ul>

    <!-- delete button -->
    <button class="delete">Delete List</button>

    <script>
      const form = document.querySelector('#addForm');
      const list = document.querySelector('#list');
      const deleteListBtn = document.querySelector('.delete');

      document.addEventListener('DOMContentLoaded', getItems) 

      // Function to add items to the list
      function addItem(e) {
        e.preventDefault(); // Prevent form submission
        const itemInput = document.querySelector('#item');
        const newItem = document.createElement('li');
        newItem.textContent = itemInput.value;
        newItem.innerHTML += '<button class="remove">Remove</button>';
        list.appendChild(newItem);

        // storing item in Local Storage
        storeItemInLocalStorage(itemInput.value);

        itemInput.value = ''; // Clear input field
      }

      // Function to remove items from the list
      function removeItem(e) {
         if (e.target.classList.contains('remove')) {
           const li = e.target.parentElement;
           list.removeChild(li);
         }
      }

      // Function to get items from LS
      function getItems() {
        let items;
        if(localStorage.getItem('items') === null) {
          items = [];
        } else {
          items = JSON.parse(localStorage.getItem('items'));
        }

        items.forEach(function(item) {
          const newItem = document.createElement('li');
          newItem.appendChild(document.createTextNode(item))

          newItem.innerHTML += '<button class="remove">Remove</button>';
          list.appendChild(newItem);
        })
      }

      // Function to store items in Local Storage
      function storeItemInLocalStorage(item) {
        let items;
        if(localStorage.getItem('items') === null) {
          items = [];
        } else {
          items = JSON.parse(localStorage.getItem('items'));
        }

        items.push(item);

        localStorage.setItem('items', JSON.stringify(items))
      }

      // Function to remove from LS
      function removeFromLocalStorage(item) {
        let items;
        if(localStorage.getItem('items') === null) {
          items = [];
        } else {
          items = JSON.parse(localStorage.getItem('items'));
        }

        items.forEach(function(itemN, i) {
          if(item.textContent === itemN) {
            items.splice(i, 1);
          }
        })

        localStorage.setItem('items', JSON.stringify(items));
      }

      // function to clear items from list
      function clearItems() {
        list.innerHTML = '';

        clearFromLocalStorage();
      }

      // function to clear items from local storage
      function clearFromLocalStorage() {
        localStorage.clear();
      }

      // Add event listeners
      form.addEventListener('submit', addItem);
      list.addEventListener('click', removeItem);
      deleteListBtn.addEventListener('click', clearItems);
    </script>
  </body>
</html>
